package com.dns.taxchina.ui.fragment;import netlib.util.AppUtil;import android.content.BroadcastReceiver;import android.content.Context;import android.content.Intent;import android.content.IntentFilter;import android.os.Bundle;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.Button;import android.widget.CheckBox;import android.widget.CompoundButton;import android.widget.CompoundButton.OnCheckedChangeListener;import android.widget.TextView;import com.dns.taxchina.R;import com.dns.taxchina.ui.CenterDetailActivity;import com.dns.taxchina.ui.CourseCollectionActivity;import com.dns.taxchina.ui.StudyRecordActivity;import com.dns.taxchina.ui.constant.LoginBroadcastConstant;import com.dns.taxchina.ui.util.LoginUtil;/** * @author henzil * @version create time:2014-4-24_下午1:59:19 * @Description 学员中心 fragment */public class CenterFragment extends BaseFragment {	private TextView title, back, userName;	private String packageName;	private CheckBox wifiBtn;	private Button studyRecord, collection, activationBtn, suggestionBtn, aboutBtn, contanctBtn;	private LoginBroadReciever loginBroadReciever;	@Override	protected void initData() {		packageName = AppUtil.getPackageName(context);		IntentFilter filter = new IntentFilter(packageName + LoginBroadcastConstant.LOGIN_INTENT_FILTER);		loginBroadReciever = new LoginBroadReciever();		context.registerReceiver(loginBroadReciever, filter);	}	@Override	protected View initViews(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {		View view = inflater.inflate(R.layout.center_fragment, container, false);		title = (TextView) view.findViewById(R.id.title_text);		title.setText("学员中心");		back = (TextView) view.findViewById(R.id.back_text);		back.setVisibility(View.GONE);		studyRecord = (Button) view.findViewById(R.id.study_record_btn);		collection = (Button) view.findViewById(R.id.course_collection_btn);		activationBtn = (Button) view.findViewById(R.id.activation_btn);		suggestionBtn = (Button) view.findViewById(R.id.suggestion_btn);		aboutBtn = (Button) view.findViewById(R.id.about_us_btn);		contanctBtn = (Button) view.findViewById(R.id.contact_us_btn);		wifiBtn = (CheckBox) view.findViewById(R.id.wifi_checkBox);		userName = (TextView) view.findViewById(R.id.user_text);		if (LoginUtil.isLogin(context)) {			userName.setVisibility(View.VISIBLE);		} else {			userName.setVisibility(View.GONE);		}		return view;	}	@Override	protected void initWidgetActions() {		studyRecord.setOnClickListener(new View.OnClickListener() {			@Override			public void onClick(View v) {				Intent intent = new Intent(context, StudyRecordActivity.class);				startActivity(intent);			}		});		collection.setOnClickListener(new View.OnClickListener() {			@Override			public void onClick(View v) {				Intent intent = new Intent(context, CourseCollectionActivity.class);				startActivity(intent);			}		});		activationBtn.setOnClickListener(new View.OnClickListener() {			@Override			public void onClick(View v) {				Intent intent = new Intent(context, CenterDetailActivity.class);				intent.putExtra(CenterDetailActivity.DETAIL_TYPE, CenterDetailActivity.ACTIVATION_TYPE);				startActivity(intent);			}		});		suggestionBtn.setOnClickListener(new View.OnClickListener() {			@Override			public void onClick(View v) {				Intent intent = new Intent(context, CenterDetailActivity.class);				intent.putExtra(CenterDetailActivity.DETAIL_TYPE, CenterDetailActivity.SUGGESTION_TYPE);				startActivity(intent);			}		});		aboutBtn.setOnClickListener(new View.OnClickListener() {			@Override			public void onClick(View v) {				Intent intent = new Intent(context, CenterDetailActivity.class);				intent.putExtra(CenterDetailActivity.DETAIL_TYPE, CenterDetailActivity.ABOUT_US_TYPE);				startActivity(intent);			}		});		contanctBtn.setOnClickListener(new View.OnClickListener() {			@Override			public void onClick(View v) {				Intent intent = new Intent(context, CenterDetailActivity.class);				intent.putExtra(CenterDetailActivity.DETAIL_TYPE, CenterDetailActivity.CONTANCT_US_TYPE);				startActivity(intent);			}		});		wifiBtn.setOnCheckedChangeListener(new OnCheckedChangeListener() {			@Override			public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {				if (isChecked) {					// TODO 勾选				} else {				}			}		});	}	// 登录结束后操作广播	public class LoginBroadReciever extends BroadcastReceiver {		@Override		public void onReceive(Context context, Intent intent) {			Bundle bundle = intent.getExtras();			int isLoginBundle = bundle.getInt(LoginBroadcastConstant.IS_LOGIN_BUNDLE_KEY, -1);			switch (isLoginBundle) {			case LoginBroadcastConstant.LOGIN_SUCCESS_TAG:				userName.setVisibility(View.VISIBLE);				userName.setText(LoginUtil.getUserName(context));				break;			case LoginBroadcastConstant.LOGIN_FAIL_TAG:				userName.setVisibility(View.GONE);				break;			default:				break;			}		}	}	@Override	public void onDestroy() {		super.onDestroy();		context.unregisterReceiver(loginBroadReciever);	}}